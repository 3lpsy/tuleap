*** geshi/geshi/php.php	2010-01-25 18:42:16.000000000 +0100
--- geshi/geshi/php.php	2010-01-25 18:42:22.000000000 +0100
***************
*** 1077,1104 ****
          3 => array(
              '<script language="php">' => '</script>'
              ),
!         4 => "/(?<start><\\?(?>php\b)?)(?:".
!             "(?>[^\"'?\\/<]+)|".
!             "\\?(?!>)|".
!             "(?>'(?>[^'\\\\]|\\\\'|\\\\\\\|\\\\)*')|".
!             "(?>\"(?>[^\"\\\\]|\\\\\"|\\\\\\\\|\\\\)*\")|".
!             "(?>\\/\\*(?>[^\\*]|(?!\\*\\/)\\*)*\\*\\/)|".
!             "\\/\\/(?>.*?$)|".
!             "\\/(?=[^*\\/])|".
!             "<(?!<<)|".
!             "<<<(?<phpdoc>\w+)\s.*?\s\k<phpdoc>".
!             ")*(?<end>\\?>|\Z)/sm",
!         5 => "/(?<start><%)(?:".
!             "(?>[^\"'%\\/<]+)|".
!             "%(?!>)|".
!             "(?>'(?>[^'\\\\]|\\\\'|\\\\\\\|\\\\)*')|".
!             "(?>\"(?>[^\\\"\\\\]|\\\\\"|\\\\\\\\|\\\\)*\")|".
!             "(?>\\/\\*(?>[^\\*]|(?!\\*\\/)\\*)*\\*\\/)|".
!             "\\/\\/(?>.*?$)|".
!             "\\/(?=[^*\\/])|".
!             "<(?!<<)|".
!             "<<<(?<phpdoc>\w+)\s.*?\s\k<phpdoc>".
!             ")*(?<end>%>)/sm",
          ),
      'HIGHLIGHT_STRICT_BLOCK' => array(
          0 => true,
--- 1077,1084 ----
          3 => array(
              '<script language="php">' => '</script>'
              ),
!         4 => "/(<\?(?:php)?)(?:'(?:[^'\\\\]|\\\\.)*?'|\"(?:[^\"\\\\]|\\\\.)*?\"|\/\*(?!\*\/).*?\*\/|.)*?(\?>|\Z)/sm" ,
!         5 => "/(<%)(?:'(?:[^'\\\\]|\\\\.)*?'|\"(?:[^\"\\\\]|\\\\.)*?\"|\/\*(?!\*\/).*?\*\/|.)*?(%>|\Z)/sm" 
          ),
      'HIGHLIGHT_STRICT_BLOCK' => array(
          0 => true,
