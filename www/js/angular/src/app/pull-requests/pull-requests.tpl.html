<div id="pull-requests-header">
    <h2 translate>Pull requests</h2>

    <ui-select ng-if="pullrequests_controller.pull_requests.length > 0"
            ng-model="pullrequests_controller.selected_pull_request"
            search-enabled="false"
            on-select="pullrequests_controller.loadPullRequest($item)"
    >
        <ui-select-match>
            <span class="id">#{{ $select.selected.id }}</span>
            <span class="title">{{ $select.selected.raw_title }}</span>
            <small class="source-dest">
                {{ $select.selected.branch_src }}
                <i class="icon-code-fork" ng-if="$select.selected.repository.isFork"></i>
                <i class="icon-long-arrow-right"></i>
                {{ $select.selected.branch_dest }}
            </small>
            <small am-time-ago="$select.selected.creation_date" class="creation-date"></small>
            <span ng-if="$select.selected.status === pullrequests_controller.valid_status_keys.abandon" class="status label" translate>Abandoned</span>
            <span ng-if="$select.selected.status === pullrequests_controller.valid_status_keys.merge" class="status label label-success" translate>Merged</span>
        </ui-select-match>
        <ui-select-choices repeat="pull_request in (pullrequests_controller.pull_requests | filter: $select.search) track by pull_request.id">
            <span class="id">#{{ pull_request.id }}</span>
            <span class="title">{{ pull_request.raw_title }}</span>
            <small class="source-dest">
                {{ pull_request.branch_src }}
                <i class="icon-code-fork" ng-if="pull_request.repository.isFork"></i>
                <i class="icon-long-arrow-right"></i>
                {{ pull_request.branch_dest }}
            </small>
            <small am-time-ago="pull_request.creation_date" class="creation-date"></small>
            <span ng-if="pull_request.status === pullrequests_controller.valid_status_keys.abandon" class="status label" translate>Abandoned</span>
            <span ng-if="pull_request.status === pullrequests_controller.valid_status_keys.merge" class="status label label-success" translate>Merged</span>
        </ui-select-choices>
    </ui-select>

    <span ng-if="pullrequests_controller.loading_pull_requests" class="loading"></span>
</div>

<div ui-view="pull-request"></div>
