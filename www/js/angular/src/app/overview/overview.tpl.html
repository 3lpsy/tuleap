<div id="pull-request-info">
    <div class="pull-request-description">
        <div ng-bind-html="overview.pull_request.title"></div>
        <blockquote ng-bind-html="overview.pull_request.description || 'No description'"></blockquote>
        <div class="pull-requests-references">
            <div>
                <span class="pull-requests-source-destination">
                    <span class="repository"
                        ng-if="! overview.pull_request.repository.isCurrent">{{ overview.pull_request.repository.name }}:
                    </span>{{ overview.pull_request.branch_src }}
                    <i class="icon-long-arrow-right"></i>
                    <span class="repository"
                        ng-if="! overview.pull_request.repository_dest.isCurrent">{{ overview.pull_request.repository_dest.name }}:
                    </span>{{ overview.pull_request.branch_dest }}
                </span>
            </div>
            <span class="pull-request-reference">{{ overview.pull_request.reference_src }}</span>
        </div>
    </div>
    <div class="pull-request-author">
        <span class="pull-request-label" translate>Requester</span>
        <div>
            <div class="avatar"><img src="{{ overview.author.avatar_url }}"></div>
            <a href="{{ overview.author.user_url }}">{{ overview.author.display_name }}</a>
        </div>
    </div>
    <div class="pull-request-date">
        <span class="pull-request-label" translate>Date</span>
        <div>{{ overview.pull_request.creation_date | date: 'short' }}</div>
    </div>
    <div class="pull-request-changes">
        <span class="pull-request-label" translate>Changes</span>
        <div>
            <span class="text-success">+{{ overview.pull_request.short_stat.lines_added}}</span>
            <span class="text-error">-{{ overview.pull_request.short_stat.lines_removed}}</span>
        </div>
    </div>
</div>

<div id="pull-request-actions">
    <button ng-if="overview.pull_request.status === overview.valid_status_keys.review"
            class="btn btn-large btn-primary"
            ng-click="overview.merge(overview.pull_request.id)"
    >
        <i class="icon-code-fork icon-rotate-270"></i> {{ 'Merge' | translate }}
    </button>
    <button ng-if="overview.pull_request.status === overview.valid_status_keys.abandon"
            class="btn btn-large btn-danger"
            disabled
            translate
    >
        Abandoned
    </button>
    <button ng-if="overview.pull_request.status === overview.valid_status_keys.merge"
            class="btn btn-large btn-success"
            disabled
            translate
    >
        Already merged
    </button>
    <button ng-if="overview.pull_request.status === overview.valid_status_keys.review"
            class="btn btn-large btn-danger"
            ng-click="overview.abandon(overview.pull_request.id)"
    >
        <i class="icon-trash"></i> {{ 'Abandon' | translate }}
    </button>
</div>

<div ui-view="comments"></div>
