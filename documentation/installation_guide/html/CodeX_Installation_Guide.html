<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
  <meta name="author" content="Laurent Julliard">
  <meta name="GENERATOR"
 content="Mozilla/4.77 [en] (X11; U; Linux 2.2.17-21mdk i686) [Netscape]">
  <title>CodeX Installation Guide</title>
</head>
<body>
&nbsp;
<center>
<p><b><font size="+3">CodeX Installation Guide</font></b> <br>
&nbsp; </p>
<p>$Revision$ - $Date$<br>
L. Julliard<br>
<br>
<font size="-1"> Copyright &copy; Xerox Corporation, CodeX Team,
2001-2003. All Rights Reserved</font><br>
</p>
</center>
<br>
&nbsp;
<br>
<h1>Preamble</h1>
Before or while you read the CodeX Installation Guide we strongly
recommend that you also have a look at the CodeX Administration Guide
at <a
 href="http://codex.codex.xerox.com/documents/CodeX_Administration_Guide.html">http://codex.codex.xerox.com/documents/CodeX_Administration_Guide.html</a>.
The CodeX Administration Guide give a lot more explanation about the
services and files role on a typical CodeX server. It is an excellent
companion document to the CodeX Installation Guide.<br>
<br>
The Installation procedure is documented so that CodeX adminstrators
learn about the interns of the CodeX software. However the CodeX
installation script provided by Xerox as part of the CodeX software
takes car of most of the installation process. The manual work that
remains to be done is displayed on the screen when the installation
script comes to an end.<br>
<h1>Linux OS Installation</h1>
On a PC of your choice install Linux RedHat 7.3 choosing an
installation of type 'server'. We recommend using the ext3 file system
(Journalized File System).<br>
<br>
In terms of hardware it is up to you to size your server according to
your needs. As an example the Xerox Internal CodeX serveris a midrange
Compaq DL 380 with 512 MB RAM, 100 GBytes disk (RAID 5) and a 1Ghz
Pentium III CPU<br>
<br>
<hr width="100%" size="2">
<h1>User Accounts and Group Settings</h1>
Specific user accounts and groups that must be created prior to any
software installation<br>
<br>
<table cellpadding="2" cellspacing="2" border="1" width="80%"
 align="center">
  <tbody>
    <tr>
      <td valign="top" bgcolor="#eeeeee"><b>User name<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>user id<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>group id<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>Full Name<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>home dir<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>shell<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>Remarks<br>
      </b></td>
    </tr>
    <tr>
      <td valign="top">sourceforge</td>
      <td valign="top">104<br>
      </td>
      <td valign="top">104<br>
      </td>
      <td valign="top">SourceForge/CodeX user</td>
      <td valign="top">/home/httpd</td>
      <td valign="top">/bin/bash</td>
      <td valign="top">Set a password<br>
      </td>
    </tr>
    <tr>
      <td valign="top">dummy</td>
      <td valign="top">103<br>
      </td>
      <td valign="top">103<br>
      </td>
      <td valign="top">Dummy CodeX user<br>
      </td>
      <td valign="top">/home/dummy</td>
      <td valign="top">/bin/bash</td>
      <td valign="top">Set same password as sourceforge<br>
      </td>
    </tr>
    <tr>
      <td valign="top">mailman</td>
      <td valign="top">105<br>
      </td>
      <td valign="top">105<br>
      </td>
      <td valign="top">Owner of Mailman directories</td>
      <td valign="top">/home/mailman</td>
      <td valign="top">/bin/bash</td>
      <td valign="top">- shell login not allowed<br>
- Set same password as sourceforge<br>
      </td>
    </tr>
    <tr>
      <td valign="top">ftpadmin</td>
      <td valign="top">96<br>
      </td>
      <td valign="top">96<br>
      </td>
      <td valign="top">FTP Administrator</td>
      <td valign="top">/home/ftp</td>
      <td valign="top">&nbsp;-<br>
      </td>
      <td valign="top">shell login not allowed</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">ftp<br>
      </td>
      <td style="vertical-align: top;">14<br>
      </td>
      <td style="vertical-align: top;">50<br>
      </td>
      <td style="vertical-align: top;">FTP User<br>
      </td>
      <td style="vertical-align: top;">/home/ftp</td>
      <td style="vertical-align: top;">-<br>
      </td>
      <td style="vertical-align: top;">shell login not allowed<br>
      </td>
    </tr>
  </tbody>
</table>
<div align="center"><br>
<br>
<br>
</div>
<table cellpadding="2" cellspacing="2" border="1" width="80%"
 align="center">
  <tbody>
    <tr>
      <td valign="top" bgcolor="#eeeeee"><b>Group name<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>group id<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>Group members<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>Remarks<br>
      </b></td>
    </tr>
    <tr>
      <td valign="top">sourceforge</td>
      <td valign="top">104<br>
      </td>
      <td valign="top">-<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">dummy</td>
      <td valign="top">103<br>
      </td>
      <td valign="top">-<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">mailman</td>
      <td valign="top">105<br>
      </td>
      <td valign="top">-<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">ftpadmin</td>
      <td valign="top">96<br>
      </td>
      <td valign="top">ftpadmin, sourceforge</td>
      <td valign="top"><br>
      </td>
    </tr>
  </tbody>
</table>
<div align="center"><br>
</div>
<hr width="100%" size="2">
<h1>File System Settings</h1>
Directory that must be created on the filesystem prior to software
installation. For a description of the content of each directory see
the
CodeX Administration Guide at <a
 href="http://codex.codex.xerox.com/documents/CodeX_Administration_Guide.html">http://codex.codex.xerox.com/documents/CodeX_Administration_Guide.html</a><br>
<br>
When you setup your filesystem make sure that the followind top
directories are located on file system with enough storage space:<br>
<ul>
  <li>/cvsroot: where the CVS repositories reside (if you want to place
it elsewhere make sure /cvsroot is a link pointing to the real location)</li>
  <li>/home : this one holds the user personal directories, project
directories (project web site), ftp spaces (file release and anonymous
storage space).&nbsp; </li>
</ul>
<br>
<table cellpadding="2" cellspacing="2" border="1" width="80%"
 align="center">
  <tbody>
    <tr>
      <td valign="top" bgcolor="#eeeeee"><b>Directory path<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>Ownership<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>permission<br>
      </b></td>
      <td valign="top" bgcolor="#eeeeee"><b>Remarks<br>
      </b></td>
    </tr>
    <tr>
      <td valign="top" rowspan="1" colspan="4"><b>CodeX Users and
Projects Directories</b><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/users</td>
      <td valign="top">sourceforge.sourceforge<br>
      </td>
      <td valign="top">drwxrwxr-x<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/groups</td>
      <td valign="top">sourceforge.sourceforge </td>
      <td valign="top">drwxrwxr-x </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top" rowspan="1" colspan="4"><b>Temporay CodeX
database dumps</b><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/dummy</td>
      <td valign="top">dummy.dummy<br>
      </td>
      <td valign="top">drwx------<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/dummy/dumps</td>
      <td valign="top">dummy.dummy </td>
      <td valign="top">drwxr-xr-x</td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top" rowspan="1" colspan="4"><b>FTP storage spaces
(incoming, anonymous and file release space)</b><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/ftp<br>
      </td>
      <td valign="top">root.ftp<br>
      </td>
      <td valign="top">drwxr-xr-x<br>
      </td>
      <td valign="top">Create a welcome.msg file in this directory with
instructions for people uploading/downloading code (see example on
CodeX
central server<br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/ftp/bin<br>
/home/ftp/etc<br>
      </td>
      <td valign="top">ftpadmin.ftpadmin<br>
      </td>
      <td valign="top">d--x--x--x<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/frp/lib<br>
      </td>
      <td valign="top">ftpadmin.ftpadmin</td>
      <td valign="top">drwxr-xr-x<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/ftp/codex<br>
      </td>
      <td valign="top">root.root<br>
      </td>
      <td valign="top">drwxr-xr-x<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/ftp/pub<br>
      </td>
      <td valign="top">ftpadmin.ftpadmin<br>
      </td>
      <td valign="top">drwxr-xr-x<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/ftp/incoming<br>
      </td>
      <td valign="top">ftpadmin.ftpadmin<br>
      </td>
      <td valign="top">drwxrwsrwt<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top" rowspan="1" colspan="4"><b>CVS directories</b><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/large_tmp<br>
      </td>
      <td valign="top">&nbsp;root.root<br>
      </td>
      <td valign="top">drwxrwxrwt<br>
      </td>
      <td valign="top">Temporary storage space for cvs commit (needs a
lot of space so we can not keep the default /tmp location)<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">/var/run/log_accum<br>
      </td>
      <td style="vertical-align: top;">root.root<br>
      </td>
      <td style="vertical-align: top;">drwxrwxrwt<br>
      </td>
      <td style="vertical-align: top;">Temporary storage space for the
cvs tracking script that feed the CodeX database<br>
      </td>
    </tr>
    <tr>
      <td valign="top" rowspan="1" colspan="4"><b>Log files
(http/cvs/ftp traffic archive)</b><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/cvsroot<br>
      </td>
      <td valign="top">sourceforge.sourceforge</td>
      <td valign="top">drwxr-xr-x<br>
      </td>
      <td valign="top">Where all CVS repo reside.<br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/log/<br>
      </td>
      <td valign="top">sourceforge.sourceforge</td>
      <td valign="top">drwxr-xr-x<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/log/cvslogs<br>
      </td>
      <td valign="top">sourceforge.sourceforge</td>
      <td valign="top">drwxrwxr-x<br>
      </td>
      <td style="vertical-align: top;">Daily generated log files of all
CVS repo hosted on CodeX (used for stattistics purposes)<br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/mailman<br>
      </td>
      <td valign="top">mailman .mailman<br>
      </td>
      <td valign="top">drwxrwsr-x<br>
      </td>
      <td valign="top">/usr/local/mailman/private directory point
(symbolic link) to this directory in case there is not enough space on
the / file system<br>
      </td>
    </tr>
    <tr>
      <td valign="top" rowspan="1" colspan="4"><b>Cache for generated
HTML</b><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/sfcache<br>
      </td>
      <td valign="top">sourceforge.sourceforge</td>
      <td valign="top">drwxr-xr-x<br>
      </td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td valign="top" rowspan="1" colspan="4"><b>MySQL directories</b><br>
      </td>
    </tr>
    <tr>
      <td valign="top">/home/var<br>
/home/var/lib<br>
/home/var/lib/mysql<br>
      </td>
      <td valign="top">root.root<br>
root.root<br>
mysql.bin<br>
      </td>
      <td valign="top">drwxr-xr-x<br>
drwxr-xr-x<br>
drwxr-xr-x<br>
      </td>
      <td valign="top">In case you have not enough space in /var you
can move the /var/lib/mysql directory to /home/var/lib/mysql and create
a symbolic link in /var/lib:<br>
      <span style="font-family: monospace;">$ cd /var/lib/ ; mv
/var/lib/mysql /home/var/lib; ln -s /home/var/lib/mysql<br>
      </span><span style="font-weight: bold;">NOTE: the mysql user will
only be available once the MySQL packages are installed (see section </span><a
 href="#RPM_Packages">RPM Packages</a>)<span
 style="font-family: monospace;"><br>
      </span> </td>
    </tr>
    <tr>
      <td valign="top" rowspan="1" colspan="4"><b>User Directory
Startup files</b></td>
    </tr>
    <tr>
      <td valign="top">/etc/skel_codex<br>
      </td>
      <td valign="top">root.root<br>
      </td>
      <td valign="top">drwxr-xr-x&nbsp; <br>
      </td>
      <td valign="top">All the files that you place in this directory
will be copied in the user's home directory when created. This would
typically contain startup files (e.g. hidden files like .bash_profile,
.bash_logout...) that you want to run when a user logs in with its
telnet/shell account.<br>
      </td>
    </tr>
  </tbody>
</table>
<div align="center"><br>
<br>
</div>
<br>
<hr width="100%" size="2">
<h1><a name="Specific_Software_Packages"></a>Specific Software Packages</h1>
<h2><a name="RPM_Packages"></a>RPM Packages</h2>
CodeX requires a number of specific packages to operate properly.
Theses packages are available on the CodeX server at <a
 href="http://codex.codex.xerox.com/packages/RPMS_CodeX">http://codex.codex.xerox.com/packages/RPMS_CodeX</a>.
Always make sure that for each of the software component below you grab
the latest version.<br>
<br>
<table cellpadding="2" cellspacing="2" border="1" width="80%">
  <tbody>
    <tr>
      <td valign="top">Software Component<br>
      </td>
      <td valign="top">Items to Install<br>
      </td>
    </tr>
    <tr>
      <td valign="top">apache<br>
      </td>
      <td valign="top">Install only the apache rpm itself.
apache-devel, apache-manual can be installed as well byt they are
optional<br>
      </td>
    </tr>
    <tr>
      <td valign="top">cvs<br>
      </td>
      <td valign="top">Install the cvs package<br>
      </td>
    </tr>
    <tr>
      <td valign="top">jre<br>
      </td>
      <td valign="top">The Java Runtime environment is required to
generate the HTML and PDF version of the CodeX User Guide. Install the
jre rpm. Ignore the file with the .bin extension that may be visible as
well in this directory<br>
      <br>
The package normally installs in /usr/java. Once installed make sure
you create a symbolic link in /usr/java from 'jre' pointing to
'jre_xxxx' where xxxx is the version number. This is required by the
DocBook processing chain to generate the CodeX User Guide.<br>
      </td>
    </tr>
    <tr>
      <td valign="top">mysql<br>
      </td>
      <td valign="top">These are the official packages from MySQL. Do
not use those provided by RedHat.<br>
To check whether Redhat mysql packages are already installed type: 'rpm
-qa | grep -i mysql'. If redhat packages are installed make sure you
first remove them with an 'rpm -e' command<br>
      <br>
Install the following packages: MySQL, MySQL-client and MySQL-shared<br>
      </td>
    </tr>
    <tr>
      <td valign="top">php<br>
      </td>
      <td valign="top">Right now CodeX runs PHP3 not PHP4. So all the
PHP4 packages installed by RedHat must be removed and the codex
supplied
packages must be used instead.<br>
      <br>
Packages to install: php, php-mysql, php-gd, php-ldap<br>
      </td>
    </tr>
    <tr>
      <td valign="top">others<br>
      </td>
      <td valign="top">From the 'Others' directory install the
following packages:<br>
      <ul>
        <li>gd-1.3.x (any newer version 1.8.x and above installed by
Redhat must be first removed)<br>
        </li>
      </ul>
      </td>
    </tr>
    <tr>
      <td valign="top">Stock RedHat<br>
      </td>
      <td valign="top">These are packages that are provided on the
RedHat CDROM. Please make sure they have been installed by the RedHat
installation process. If not then install them directly from the CDROM
with an 'rpm -Uvh' command.<br>
      <br>
Packages to install:<br>
      <ul>
        <li>mm, mm-devel</li>
        <li>openssh-server,&nbsp;openssh, openssh-clients,
openssh-askpass</li>
        <li>openssl (if you intend to allow secure HTTP access)</li>
        <li>openldap</li>
        <li>perl, perl-DBI, perl-DBD-MySQL, perl-Digest-MD5,
perl-suidperl, perl-CGI</li>
        <li>python (for mailman)<br>
        </li>
        <li>sendmail (8.9.x)</li>
        <li>wu-ftpd, telnet, named, ntp</li>
        <li>samba (if you want to activate windows connectivity to the
project Web site storage space and software release space)</li>
        <li>compat-glibc-x.y.z and compat-libstdc++-x.y.z (needed by
the SUN JRE)<br>
          <br>
          <br>
        </li>
      </ul>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>
<h2>Non RPM packages</h2>
CodeX alsorequires a number of specific packages that are not delivered
in the form of RPM files. Theses packages are available on the CodeX
server at <a href="http://codex.codex.xerox.com/packages/nonRPMS_CodeX">http://codex.codex.xerox.com/packages/nonRPMS_CodeX</a>.
Always make sure that for each of the software component below you grab
the latest version.<br>
<br>
<table cellpadding="2" cellspacing="2" border="1" width="80%">
  <tbody>
    <tr>
      <td valign="top">Software Component<br>
      </td>
      <td valign="top">Items to Install<br>
      </td>
    </tr>
    <tr>
      <td valign="top">docbook<br>
      </td>
      <td valign="top">In this directory you'll find all the programs
required to generate the PDF and HTMl version of the CodeX
Documentation
(CodeX User Guide). All the packages (delivered in tar gzip'ed format
must be installed in /usr/local:<br>
      <ul>
        <li>docbook-dtd-x.y.z.tgz: the DocBook Schema itself.&nbsp;</li>
        <li>docbook-xsl-x.y.z.tgz: DocBook XSL stylesheets.&nbsp;</li>
        <li>fop-x.y.z.tgz: the Apche FOP PDF generator.&nbsp;</li>
        <li>Jimi-x.y.tgz: a java image processing software needed by FOP</li>
        <li>saxon-x.y.z.tgz: XSLT engine to process the DocBook XML
documents</li>
      </ul>
Each of these packages must be dearchived in /usr/local and for each
directory make sure your create a generic symbolic link (with no
version
number in it) to the top level directory. Like this:<br>
      <blockquote>docbook-dtd &nbsp;-&gt; docbook-dtd-x.y.z<br>
docbook-xsl &nbsp;-&gt; docbook-xsl-x.y.z<br>
fop -&gt; fop-x.y.z<br>
jimi -&gt; Jimi-x.y.z (Caution!! symbolic link uses lower case only)<br>
etc...<br>
      </blockquote>
      </td>
    </tr>
    <tr>
      <td valign="top">utilities<br>
      </td>
      <td valign="top">A series of small utilities that are needed by
the PHP scripts and the CodeX backend to operate properly. &nbsp;See
the <a href="#Miscellaneous_Utilities">Miscellaneous Utilities</a>
section
below for more information<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>
<br>
<hr>
<h1>DNS Configuration</h1>
CodeX has its own domain name and the name server for the CodeX
domain is hosted on the central CodeX server. <br>
<br>
For the benefit of code re-use and sharing the CodeX central
site must absolutely be aware of the all the existing satellites in
order to keep a single view on all the on-going projects.So please
contact
the administration team of the CodeX central prior to implementing any
new CodeX satellite.<br>
<br>
If your satellites does not belong to the main CodeX domain then we
advise to create a
subdomain for the codex machine like codex.your.own.domain.<br>
<br>
<h2>DNS Zones file</h2>
Your DNS zone (called codex.zone) definition file must be place in <tt>/usr/local/domain/data/primary/</tt>
because this path is hardcoded in the <tt>/home/httpd/SF/utils/underworld-dummy/dns_conf.pl</tt>
script that is used to automatically generate the DNS aliases for
project sites and per project CVS server. If you want to place the
codex.zone file in another place don't forget to create a symbolic link
from this directory.<br>
<br>
<br>
As an example here is how the codex.zone file looks like on the CodeX
central site of the Xerox Corporation:<br>
<br>
<blockquote><tt>$TTL 3600</tt><br>
  <tt>@&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SOA&nbsp;&nbsp;&nbsp;&nbsp;
atlas.codex.xerox.com. dns_support\.cinops.xerox</tt><br>
  <tt>.com. (</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2002101805&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Serial</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3600&nbsp;&nbsp;&nbsp; ; Refresh 1 hour</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
900&nbsp;&nbsp;&nbsp;&nbsp; ; Retry 15 minutes</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
604800&nbsp; ; Expire in 7 days</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3600 )&nbsp; ; Minimum TTL 1 hours</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
atlas.codex.xerox.com.</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
athena.xerox.com.</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
beta.xerox.com.</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
carme.xerox.com.</tt><br>
  <tt>localhost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
127.0.0.1</tt><br>
  <tt>;----------------------------------------------------------------------</tt><br>
  <br>
  <tt>codex.xerox.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
13.0.33.116</tt><br>
  <tt>atlas&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
13.0.33.116 ; production server</tt><br>
  <tt>atlas2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
13.0.33.45&nbsp; ; backup server</tt><br>
  <br>
  <tt>codex.xerox.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; atlas.codex.xerox.com.</tt><br>
  <tt>codex.xerox.com.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mailer-east.xerox.com.</tt><br>
  <tt>;</tt><br>
  <tt>www&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CNAME&nbsp;&nbsp; atlas</tt><br>
  <tt>xww&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CNAME&nbsp;&nbsp; atlas</tt><br>
  <tt>cvs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CNAME&nbsp;&nbsp; atlas</tt><br>
  <tt>cvs1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CNAME&nbsp;&nbsp; atlas</tt><br>
  <tt>download&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CNAME&nbsp;&nbsp; atlas</tt><br>
  <tt>shell&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CNAME&nbsp;&nbsp; atlas</tt><br>
  <tt>shell1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CNAME&nbsp;&nbsp; atlas</tt><br>
  <tt>users&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CNAME&nbsp;&nbsp; atlas</tt><br>
  <tt>cxdocs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CNAME&nbsp;&nbsp; atlas</tt><br>
  <tt>lists&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A&nbsp;&nbsp; 13.0.33.116</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lists.codex.xerox.com.</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mailer-east.xerox.com.</tt><br>
  <br>
;<br>
; *** From here out is auto-generated ***<br>
:<br>
</blockquote>
<br>
<br>
As you can see the CodeX central host all the services on one single
server, hence the alias to the atlas machine name for all other logical
servers (CVS, download, shell account,etc...). The reason for defining
those aliase is that at the site grows you are given the flexibility to
export specific services (e.g CVS, mailman,etc.) to a separate server
and all you'll have to do is to redefine the alias name to point on
the&nbsp; IP address of the new server. Note that all servers must
remain in the CodeX domain.<br>
<br>
Also note that CodeX cron job will generate another file called
codex_full.zone in the same directory as the codex.zone file. This file
is obtained by taking the codex.zone file (which you can edit by hand)
and appending auto-generated aliases for the each project Web site (
http://projectname.codex.xerox.com) and each CVS server
(cvs.projectname.codex.xerox.com)<br>
<br>
<h2>Named.conf file</h2>
This is the master DNS configuration file. It is located in /etc and,
as an example,
here is how it looks like on the CodeX central site of the Xerox
corporation:<br>
<br>
<tt>options {</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; directory
"/usr/local/domain/data/primary";</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; forwarders {</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
13.252.44.4;</tt> &nbsp;// Put your own DNS forwarders list here!!!<br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
13.252.44.5;</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
13.142.120.31;</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
13.1.64.94;</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</tt><br>
<tt>};</tt><br>
<br>
<tt>zone "." {</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type hint;</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file "root.cache.save";</tt><br>
<tt>};</tt><br>
<br>
<tt>zone "0.0.127.in-addr.arpa" {</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type master;</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file "localhost.rev";</tt><br>
<tt>};</tt><br>
<br>
<tt>zone "codex.xerox.com" {</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type master;</tt><br>
<tt>// LJ CAUTION !! Do not modify the file codex_full.zone by hand</tt><br>
<tt>// LJ Only codex.zone can be manually edited</tt><br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file "codex_full.zone";</tt><br>
<tt>}</tt><br>
<br>
<hr width="100%" size="2">
<h1>Apache Configuration</h1>
<ul>
  <li>A sample Apache configuration file is available in the CodeX code
in <tt>/home/httpd/SF/etc/http.conf.dist</tt>. Edit this file to
reflect your site settings and place it in <tt>/etc/httpd/conf/httpd.conf</tt>.</li>
  <li>Start or restart the Apache web server (from the root account
type the command: 'service httpd restart')<br>
  </li>
</ul>
<h2>Secure Apache (https)</h2>
Before you activate SSL in Apache make sure the standard RedHat openssl
package is installed. Then you must either generate your own test
certificate or you must get one from a certified company and install it
in the right place. The RedHat Manual has excellent instructions on how
to do that. See the section called 'Apache Secure Server
Configuration'.
In RedHat 7.3 manual it is at <a
 href="http://www.redhat.com/docs/manuals/linux/RHL-7.3-Manual/custom-guide/ch-apache-secure-server.html">http://www.redhat.com/docs/manuals/linux/RHL-7.3-Manual/custom-guide/ch-apache-secure-server.html</a>.
Note: although RedHat recommends that you generate a password protected
key for your certificate it has some serious implications. The most
noticeable is that a system administrator must be physically present
will rebooting the CodeX system to type the password when the Apache
server is started. This prevent from doing an unattended reboot.<br>
<br>
The sample http.conf.dist contains all the necessary Apache directives
to enable secured HTTP. There are 3 places that you need to activate:
<ul>
  <li>The 'Listen' section must listen to port 80 (http) and 443 (https)</li>
  <li>You must load the mod_ssl module in the module section (both the
LoadModule and Addmodule statements)<br>
  </li>
  <li>Uncomment the virtual host declaration at the end of the file
which actually activates the secure HTTP server on port 443. And make
sure to replace the "IP_ADDRESS_HERE" pattern in the virtual host
declaration with your real IP address</li>
  <li>For the changes to take effect you must restart the Apache server.</li>
  <li>Then edit the /etc/local.inc file and edit the $sys_https_host
variable (in most cases this will be the same name as the
$sys_default_domain variable. If the port number you use for https is
not the regular one (443) then you must specify the port number
explicitely in the host name.</li>
  <li>In the same /etc/local.inc file, you can also tune the
$sys_stay_in_ssl and $sys_force_ssl variables to determine how HTTPS is
going to be used/enforced on your site.<br>
  </li>
</ul>
<br>
<hr width="100%" size="2">
<h1><a name="Installing_the_CodeX_Software"></a>Installing the CodeX
Software</h1>
The prefered way to install the CodeX software is to check it out from
the CodeX CVS repository. This will make it easy for you to keep up to
date with &nbsp;subsequent new features or bug fix. <br>
<ul>
  <li>Before you install the CodeX software make sure you have a user
account on the central CodeX server. You'll need this user account to
check out the source code from the CodeX CVS repository.</li>
  <li>Ask us (<a href="mailto:codex-contact@codex.xerox.com">codex-contact@codex.xerox.com</a>)
to add you to the codex-cvsevents mailing list to automatically receive
all the commit made to the Central CVS repository of CodeX so you know
what modifications are being made and what to do to upgrade.&nbsp;</li>
  <li><font color="#ff0000">If you want to develop a new feature, <b>PLEASE</b>
get in touch with the CodeX Team to talk about it first. By doing so we
can mutualize our development resources and make your effort beneficial
to the entire Xerox community. Plus we can provide you with useful
guidelines and tips. In addition remember that the CodeX code is
subject
to the GNU GPL license.&nbsp;</font></li>
</ul>
To check out the CodeX source code: login as Unix user 'sourceforge'
and go to /home/httpd/. From there checkout the CodeX code,
documentation and site content modules:<br>
<pre>	cvs -d:pserver:your_codex_login@cvs.codex.codex.xerox.com:/cvsroot/codex co SF site-content documentation cgi-bin<br></pre>
where <span style="font-family: monospace;">your_codex_login</span> is
the CodeX user name of the user who is going to checkout the CodeX
source code.<br>
<pre><br></pre>
<hr width="100%" size="2">
<h1>Configuring the CodeX Software</h1>
As user root:<br>
<ul>
  <li>copy /home/httpd/SF/etc/local.inc.dist in /etc/local.inc&nbsp;</li>
  <li>change /etc/local.inc ownership (chown sourceforge.sourceforge
/etc/local.inc)</li>
  <li>change permission (chmod 640 /etc/local.inc) <b><font
 color="#ff0000">**HIGHLY CRITICAL**</font></b></li>
</ul>
A couple of remarks on the some the variables in local.inc:<br>
<ul>
  <li><b>Machine names</b>: The local.inc file is included by all CodeX
PHP scripts and contains global variables that are used throughout the
site. This file is also by the backend Perl scripts (see below).
&nbsp;You'll see that CodeX allows you to give distinct machine names
that will be in charge of the various CodeX services (Web front end,
CVS, Shell account, list manager,etc.). Even if you run all those
services on the same machine we strongly encourage you to give
different
names for the various services and setup your DNS server so that all
these are actually aliases to the same physical server. The reason is
that it gives you the freedom, later in the life of the site, to
delocalize a given service on a distinct machine without having to mess
up with the CodeX database. The simple fact of assigining a new IP
adress to what used to be a simple alias will automagically redirect
all
the traffic for this service to the right machine.</li>
  <li><b>Database parameters</b> ($sys_dbxxx) : you'll have to provide
the password for the MySQL sourceforge user here so make sure you have
set the file permission of local.inc correctly (see above)</li>
  <li><b>CodeX News group</b> ($sys_news_group): this is a reserved
CodeX group_id. Leave this value unchanged.</li>
  <li><b>Site language</b> ($sys_lang): right now only the US English
is
supported so leave this variable as is</li>
  <li><span style="font-weight: bold;">HTTPS host </span>($sys_https_host):
if your Apache server is SSL enabled (HTTPS protocol) set this variable
with name/port number of the host to talk to. In general it is the same
name as $sys_default_domain. Set it to an empty string ($sys_https_host
= "") if your site is not SSL enabled.</li>
</ul>
<h2>PHP configuration</h2>
<ul>
  <li>Change the include_path variable in /etc/httpd/php3.ini to the
following value:<br>
    <pre>&nbsp; &nbsp; &nbsp; include_path&nbsp;&nbsp;&nbsp; = .:/home/httpd/SF/www/include:/home/httpd/SF/www/phpMyAdmin</pre>
  </li>
  <li>Also set/tune some additional variable for upload size:<br>
    <br>
    <div style="margin-left: 40px; font-family: monospace;">upload_max_filesize
= 20971520 ; 20 Meg default limit on file uploads (CodeX)<br>
post_max_size = 20971520&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 20 Meg
byte limit on post size (CodeX)<br>
memory_limit&nbsp; = 31457280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 30
Meg byte limit on memory limit (CodeX)<br>
    <br>
    </div>
  </li>
  <li>And load the following extensions only: <span
 style="font-family: monospace;">gd.so, ldap.so, mysql.so</span><br>
  </li>
</ul>
<hr width="100%" size="2">
<h1>Installing the CodeX Database</h1>
As user root go through the following steps:<br>
<br>
<h2>Move the mysql data directoy</h2>
<ul>
  <li>Make sure the official MySQL RPMs are installed (see above)</li>
  <li>If your root file system where /var/lib/mysql resides has not
enough space move this directory (and only this one) to another place
with plenty of space (e.g. /home/var/lib/mysql). Stop the mysql engine
before doing this (command is 'service mysql stop')</li>
  <li>Make sure the mysql engine is started (command is 'service mysql
start')</li>
</ul>
<h2>Create CodeX database</h2>
<p>As root, run in a shell </p>
<pre>		mysql -e "create database sourceforge"<br><br></pre>
<h2>Define access permission</h2>
<ul>
  <li>Choose distinct&nbsp; passwords for the MySQL 'sourceforge'
account &nbsp;<b>and</b> 'root' account. We recommend that you use the
same passwords as those you chose for the sourceforge Unix account and
root Unix account created earlier.&nbsp;</li>
  <li>Then run mysql on the mysql database: </li>
</ul>
<pre>		# mysql mysql<br><br>		mysql&gt; GRANT ALL PRIVILEGES<br>      on sourceforge.* <br>      to sourceforge@localhost <br>      identified by 'password';<br><br>		mysql&gt; GRANT ALL PRIVILEGES<br>      on *.* <br>      to root@localhost <br>      identified by 'password';<br>				  <br>		mysql&gt; Flush Privileges;<br>		mysql&gt; quit<br><br></pre>
From now onwards if you want to use the mysql shell to interact with
the CodeX database (think twice before doing any change by hand in the
database !!!) you'll have to run the following command and type the
sourceforge password when prompted:<br>
<br>
<pre>		# mysql -u sourceforge sourceforge -p<br></pre>
<br>
<h2>Populate the database</h2>
To create the tables in the CodeX database and populate the database
with the initial values run the script in <span
 style="font-family: monospace;">SF/utils/mksql.sh</span>. You can also
decide to run the 2 operations separately using the following commands:
<pre>cd /home/httpd/SF/db/mysql/<br>mysql -u sourceforge sourceforge -p &lt; database_structure.sql   # create the DB<br>mysql -u sourceforge sourceforge -p &lt; database_initvalues.sql  # populate with init values.<br><br>If you make a mistake in the creation process and want to restart from scratch run the following command:<br></pre>
<pre>mysql -e "drop database sourceforge"<br><br></pre>
<h2>MySQL configuration file</h2>
The /etc/my.cnf configuration file is here to specify a number of
configuration items that are going to be used by the MySQL engine at
run
time.&nbsp; Right now the configuration file looks like this<br>
<br>
<span style="font-family: monospace;"># The MySQL server</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">[mysqld]</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">log-bin=/cvsroot/.mysql_backup/atlas-bin</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">skip-innodb</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;"># file attachment can be 2M in
size so take a bit of slack</span><br style="font-family: monospace;">
<span style="font-family: monospace;"># on the mysql packet size</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">set-variable =
max_allowed_packet=3M</span><br style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">[safe_mysqld]</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">err-log=/var/log/mysqld.log<br>
<br>
</span>
<p>The max_allowed_packet parameter is really important because the
file attachment size for bug tracker and task manager has been
increased
to 2 Mbytes and we must have a bit of slack when issuing an SQL insert
statement with a large blob. Hence the 3M argument (3 Mbytes).</p>
<hr>
<h1>Mail Configuration</h1>
CodeX uses sendmail as Mail transfer agent but it is possible to use
any other MTA like Postfix, Exim or other. You need to setup <br>
<br>
<h2>Sendmail settings</h2>
<br>
<u>In /etc/sendmail.cf:</u><br>
<ul>
  <li>Set Cw to codex.xerox.com (or change the domain name to your own)</li>
  <li>Set DM to codex.xerox.com (this is what we masquerade as)</li>
  <li>Aliases files are:<br>
    <pre>O AliasFile=/etc/aliases,/etc/aliases.codex</pre>
  </li>
</ul>
<u>In /etc/sendmail.cw:</u><br>
<ul>
  <li>Say that you are serving the domains codex.xerox.com and
lists.codex.xerox.com as follows:<br>
    <pre># sendmail.cw - include all aliases for your machine here.<br>codex.xerox.com<br>lists.codex.xerox.com</pre>
    <pre><br></pre>
  </li>
</ul>
<h2>Aliases</h2>
<u>/etc/aliases</u><br>
<br>
This is where you must insert system level aliases by hand (e.g.
aliases for postmaster, root, etc.). <br>
<br>
/<u>etc/aliases.codex</u><br>
<br>
aliases.codex is generated automatically bo the CodeX cron job (see
below) and contains the aliases for all the mailing lists in the
@lists.codex.xerox.com domain and the email aliases for users. **Never
edit this file by hand**<br>
<br>
<u>/home/httpd/SF/utils/underworld-dummy/aliases.zone</u><br>
<br>
This is where you can define CodeX level aliases like codex-contact,
codex-admin, etc. This file is currently under cvs control so if you
are
managing your own site it might be a better idea to add these aliases
in
/etc/aliases to avoid conflict when merging new code from CodeX CVS
repository<br>
<br>
<h2>Sendmail shell wrappers</h2>
In the CodeX Configuration, sendmail uses a number of shell wrappers
used in pipe commands in the aliases file. These shell wrappers must be
explicitely delcared in the /etc/smrsh directory in order to execute
properly. You should create the following links:<br>
<br>
<pre>	# cd /etc/smrsh<br>	# ln -sf /usr/local/bin/gotohell<br>	# ln -sf /usr/local/mailman/mail/wrapper<br></pre>
<br>
<hr>
<h1>Mailman Installation and Configuration</h1>
For historical reasons CodeX do not use the RedHat mailman RPMs but the
stock archive directly from the Mailman Web site. You can get mailman
at <a href="http://www.gnu.org/software/mailman/">http://www.gnu.org/software/mailman/</a>
(CodeX uses the 2.0.x version). Unarchive the tar file in
/usr/local/mailman and make sure your read the README, INSTALL and
UPGRADING files (in case of an upgrade).<br>
<br>
Also setup a mailman admin password once the installation is done (we
recommend that you se the same password as the sourceforge account). To
this end use the 'mmsitepass' script in /usr/local/mailman/bin.<br>
<br>
You must also configure the Apache configuration <tt>httpd.conf</tt>
to
instruct Apache on how to access the Web based mailing manager and
archiver. A sample configuration file is provided in the CodeX source
code at <tt>SF/etc/mailman.conf.dist</tt> . Place this file in the
same
directory as your <tt>httpd.conf</tt> file and include it at the end
of <tt>httpd.conf</tt>.<br>
<br>
You must also override some Mailman variable settings, most notably the
DEFAULT_HOST_NAME and&nbsp; DEFAULT_URL. Look at their original
definition in <span style="font-family: monospace;">/home/mailman/Mailman/Defaults.py</span>
and redefine them in <span style="font-family: monospace;">/home/mailman/Mailman/mm_cfg.py.</span>
Then recompile with python -O mm_cfg.py.<br>
<br>
<hr width="100%" size="2">
<h1><a name="Miscellaneous_Utilities"></a>Miscellaneous Utilities</h1>
There are a few utilities that must be either compiled and/or installed
in /usr/local/bin. A precompiled version of all these scripts is
provided at <a
 href="http://codex.codex.xerox.com/packages/nonRPMS_CodeX/utilities">http://codex.codex.xerox.com/packages/nonRPMS_CodeX/utilities</a>
<br>
<br>
<h2>fileforge</h2>
<p>This is a small utility which is called by the Apache server to move
files from the incoming ftp directory to the project file release space</p>
<p>Go to /home/httpd/SF/utils. In fileforge.c, modify the following
lines if need be </p>
<pre>  char * src_dir   = "/home/ftp/incoming/"; /* the ftp incoming directory */<br>  char * dest_dir  = "/home/ftp/codex/"; /* the file release space for CodeX projects */<br></pre>
The trailing slashes are mandatory. Compile it with gcc -O2 -o
fileforge fileforge.c. Then copy fileforge to /usr/local/bin and run:
<pre>	# cd /usr/local/bin<br>	# chown root.sourceforge fileforge<br>	# chmod 4750 fileforge   # sets the uid bit<br><br></pre>
<h2>tmpfilemove</h2>
<p>This is a small utility which is called by the Apache server to move
files from the HTTP upload area to the ftp incoming space.</p>
<p>Go to /home/httpd/SF/utils. In tmpfilemove.c, modify the following
lines if need be </p>
<pre>  char * src_dir   = "/tmp/"; /* HTTP upload area */<br>  char * dest_dir  = "/home/ftp/incoming/"; /* the FTP Incoming space */<br></pre>
The trailing slashes are mandatory. Compile it with gcc -O2 -o
tmpfile tmpfilemove.c. Then copy&nbsp;tmpfilemove to /usr/local/bin and
run:
<pre>	# cd /usr/local/bin<br>	# chown root.sourceforge tmpfilemove<br>	# chmod 4750 tmpfilemove   # sets the uid bit<br><br></pre>
<h2>gensmbpasswd</h2>
This is a small utility called by CodeX login creation or change
password script to generate the MD4 encoding of the user password that
will be given to the Samba server to configure password protected
access
to Windows shared resources like the ftp Incoming directory, the user
personal directory and the project directory the user belong to.<br>
<br>
This file is quite difficult to compile so get it from the location
mentioned at the beginning of this section. Ownership and permission
must be:<br>
<pre>&nbsp;&nbsp;&nbsp; 	-rwxr-xr-x&nbsp;&nbsp;&nbsp; 1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 892963 Oct&nbsp; 7 21:37 /usr/local/bin/gensmbpasswd</pre>
<h2>gotohell</h2>
A simple shell script to discard all the messages sent to the
noreply@codex.xerox.com messages. The file must contain:<br>
<br>
<blockquote>
  <pre>#!/bin/sh</pre>
  <pre>cat - &gt;/dev/null</pre>
</blockquote>
Ownership and permission must be:<br>
<pre>	-rwxr-xr-x&nbsp;&nbsp;&nbsp; 1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 27 Dec 11&nbsp; 2001 /usr/local/bin/gotohell</pre>
<br>
<br>
<hr>
<h1>Samba Configuration (optional)<br>
</h1>
CodeX allows Window users to access their user directory, project
directory and FTP Incoming space through Windows network drives. To
enable this feature you just need to:<br>
<ul>
  <li>&nbsp;Install the Samba rpms</li>
  <li>Make sure the gensmbpasswd program is installed in /usr/local/bin</li>
  <li>Create a symbolic link from /etc/smbpasswd to
/etc/samba/smbpasswd (the password file will be automatically generated
by the CodeX cron job)</li>
  <li>Edit /etc/samba/smb.conf to accomodate your site configuration.
here are the parameters you must change<br>
&nbsp; workgroup = <i>The Windows domain name you belong to</i><br>
&nbsp; server string = <i>Description of the server</i><br>
&nbsp; security = user<br>
&nbsp; encrypt passwords = yes<br>
&nbsp; smb passwd file = /etc/samba/smbpasswd<br>
&nbsp; socket options = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192<br>
&nbsp; local master = no<br>
&nbsp; wins server = <i>The IP address of your closest wins server</i><br>
&nbsp; dns proxy = no <br>
&nbsp; netbios name = <i>Set your Windows machine name here (Don't use
CODEX because it is the name of the central site)<br>
    <br>
    </i></li>
  <li>Define the following shared resources:<br>
    <pre>[homes]<br>   comment = User Home Directories<br>   browseable = no<br>   writable = yes<br><br>[Projects]<br>   comment = CodeX Project Directories<br>   path = /home/groups<br>   browseable = yes<br>   writable = yes<br>   printable = no<br>   force create mode = 0775<br>   force directory mode = 2775<br>   map archive = no<br><br>[Ftp_Incoming]<br>   comment = Anonymous FTP Incoming Space for File Releases<br>   path = /home/ftp/incoming<br>   browseable = yes<br>   writable = yes<br>   printable = no<br>   force create mode = 0644<br>   map archive = no<br></pre>
  </li>
</ul>
<hr>
<h1>CVS Configuration</h1>
<ul>
  <li>First make sure the CodeX specific RPMs for CVS are installed on
your CodeX server (see the section on <a href="#RPM_Packages">RPM
Packages</a>)</li>
  <li>Create the <tt>/etc/cvs_root_allow</tt> file as follows:<br>
    <br>
    <tt># touch /etc/cvs_root_allow<br>
# chown sourceforge.sourceforge /etc/cvs</tt><tt>_root</tt><tt>_allow<br>
# chmod 644 /etc/cvs</tt><tt>_root</tt><tt>_allow</tt></li>
</ul>
Then you have to decide what type of CVS access you want to offer to
your users.: either through the standard pserver protocol or through
SSH
(secure shell). If your site is inside your corporate network the
pserver method is a good choice. If your site is on the Internet we
recommend that you use the SSH approach to make sure that
confidential&nbsp; information like passwords or source code travels
encrypted.
<h2>The pserver approach</h2>
<ul>
  <li>Configure xinetd to start the cvs server when needed. The
/etc/xinetd.d/cvs file must look like this: <br>
    <tt>service cvspserver<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
disable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
socket_type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = stream<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
protocol&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= tcp<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= root<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
server&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= /usr/bin/cvs<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
server_args&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = -f -z3
-T/home/large_tmp --allow-root-file=/etc/cvs_root_allow pserver<br>
}</tt></li>
</ul>
The benefit of using the pserver approach is that you can define who
has read and write permission on the CVS repository through the
CVSROOT/readers and CVSROOT/writers file of your CVS repository. In the
current implementation all project members are granted read and write
access to the CVS repository of the projects they belong to. &nbsp;You
can always add users' name in the CVSROOT/readers file to give them
read-only access.<br>
<ul>
</ul>
<h2>The SSH approach</h2>
The idea behind the SSH approach is that a client ssh to the remote
server and the cvs command is actually executed on the remote server.
Note that this is different from another approach which consist of
using
the port forwarding capability of SSH to encrypt all trafic on the TCP
port 2401 used by the pserver.<br>
<br>
There is no much to do to allow this method. The simple fact of having
the sshd daemon running will allow users to use this method. Things to
pay attention to:<br>
<ul>
  <li>If you want to disable the pserver access, make sure you edit
/etc/xinetd.d/cvs, change the 'disable' parameter to 'yesy' and restart
xinetd (service xinetd restart)</li>
  <li>On the client side, &nbsp;users must set the environment variable
CVS_RSH to 'ssh'</li>
  <li>You must also copy the site-content/en_US/cvs/intro.txt in
site-content/custom/en_US/cvs/intro.txt and edit it to reflect the new
CVS access method.<br>
    <br>
  </li>
</ul>
<h2>The CVS Tracking Database</h2>
CodeX offers the ability for each project to build a database of all
CVS events (commit, add, delete) happening on their CVS repository.
This feature is activated in the CVS Web interface of the CodeX Web
frontend under CVS -&gt; Admin. For this feature to work properly
symbolic links must be created from the /usr/local/bin directory as
follows:<br>
<pre><tt>&nbsp;&nbsp;&nbsp; # cd /</tt><tt>/home/httpd/SF/utils/cvs1</tt><tt><br>&nbsp;&nbsp;&nbsp; # cp log_accum /usr/local/bin<br>&nbsp;&nbsp;&nbsp; # cp commit_prep</tt><tt> /usr/local/bin</tt></pre>
The log_accum script in requires the
sourceforge group ownership to execute properly. <b><font
 color="#ff0000">**HIGHLY CRITICAL**</font></b>
<pre>	# cd /usr/local/bin<br>	# chown sourceforge.sourceforge log_accum commit_prep<br>	# chmod 755 log_accum commit_prep<br>	# chmod u+s log_accum   # sets the uid bit (-rwsr-xr-x)<br></pre>
Be careful that you must set the uid bit again whenever the log_accum
script is updated from CVS and copied again into the /usr/local/bin
directory.<br>
<tt><br>
</tt>
<h2>Browsing the CVS Trees</h2>
When you checkout the CodeX software (see&nbsp;<a
 href="#Installing_the_CodeX_Software">#Installing_the_CodeX_Software</a>
), a cgi-bin directory is created. The cvsweb.cgi script located in
this directory is used by CodeX when a user browse a CVS repository
through the CVS Web interface. In order for this script to work
properly you must install a configuration in /etc/httpd/conf. A
template is provided in the CVS source tree under etc/cvsweb.conf.dist.
If you have installed the CVS repositories under /cvsroot you can
normally use this configuration file as is. To install this
configuration go through the following steps:<br>
<pre><tt>&nbsp;&nbsp;&nbsp; cd /home/httpd/SF/etc<br>&nbsp;&nbsp;&nbsp; cp cvsweb.conf.dist /etc/httpd/conf/cvsweb.conf<br></tt><tt>&nbsp;&nbsp;&nbsp; chown root.root </tt><tt>/etc/httpd/conf/cvsweb.conf</tt><tt><br></tt><tt>&nbsp;&nbsp;&nbsp; </tt><tt>chmod 644 </tt><tt>/etc/httpd/conf/cvsweb.conf</tt><tt><br></tt></pre>
<br>
<hr>
<h1>FTP Configuration</h1>
<ul>
  <li>Make sure the ftp access is enabled in xinetd. The
/etc/xinetd.d/wu-ftpd should look like this:<br>
    <tt>service ftp<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; disable = no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
socket_type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= stream<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
wait&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= root<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
server&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= /usr/sbin/in.ftpd<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
server_args&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= -l -a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
log_on_success&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +=
DURATION<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
nice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= 10<br>
}</tt><br>
    <br>
  </li>
  <li>The /etc/ftpaccess on the CodeX site looks like this:<br>
    <br>
    <tt>class&nbsp;&nbsp; all&nbsp;&nbsp; real,guest,anonymous&nbsp; *<br>
class anonftp anonymous *<br>
    <br>
upload /home/ftp * no<br>
upload /home/ftp /bin no<br>
upload /home/ftp /etc no<br>
upload /home/ftp /lib no<br>
noretrieve .notar<br>
upload /home/ftp /incoming yes ftpadmin ftpadmin 0644 nodirs<br>
noretrieve /home/ftp/incoming<br>
noretrieve /home/ftp/codex<br>
    <br>
email root@localhost<br>
    <br>
loginfails 5<br>
    <br>
readme&nbsp; README*&nbsp;&nbsp;&nbsp; login<br>
readme&nbsp; README*&nbsp;&nbsp;&nbsp; cwd=*<br>
    <br>
message
/welcome.msg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
login<br>
message
.message&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
cwd=*<br>
    <br>
compress&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
all<br>
tar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
all<br>
chmod&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; no&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; guest,anonymous<br>
delete&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; no&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; guest,anonymous<br>
overwrite&nbsp;&nbsp;&nbsp; no&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
guest,anonymous<br>
rename&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; no&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; guest,anonymous<br>
    <br>
log transfers anonymous,real inbound,outbound<br>
    <br>
shutdown /etc/shutmsg<br>
    <br>
passwd-check rfc822 warn<br>
    <br>
    </tt></li>
  <li>Under /home/ftp, create the exact same hierarchy and files as on
the CodeX production server.<tt><br>
    </tt></li>
</ul>
<hr>
<h1>Shell Account</h1>
Unless otherwise instructed the CodeX system will create a shell
account for all users who have a Web account. The login and password
are
the same. Users can access their shell account either through SSH or
telnet. We will see how to restrict the use of a shell account below.
It
is also possible to suspend or delete a user account (both Web and
Unix) but be aware that disabling the Linux account will prevent users
from using all the peripheral services like CVS, FTP,... <br>
<h2>SSH Configuration</h2>
Simply check that the ssh daemon is started (command is 'service ssh
start'). Also make sure that it is started at boot time (command is
'chkconfig sshd on').
<h2>Telnet Configuration</h2>
Telnet access should only be enabled when your CodeX site is on a safe
network. If you are on the Internet we *strongly* recommend that you
disable it. To enable/disable the telnet access on your CodeX server,
edit the /etc/xinetd.d/telnet file and change the 'disable' parameter
accordingly. Then restart xinetd.<br>
<h2>Restricted Shell Capabilities</h2>
It is sometimes desirable to allow the creation of a Shell Account for
CodeX users while limiting the thing they can do with it. For instance
you may want to limit the capabilities of certain users to use only CVS
and may be sftp if you decide to use the secure ftp server but you
don't
want them the log into the system with a real shell like bash. Doing so
is just a matter of changing the shell account associated with a given
user.<br>
<br>
By default the user table of the CodeX database has '/bin/bash'
configured as the default shell. When the user account is created by
the
cron job s/he will have /bin/bash as a shell and therefore s/he will be
given full shell capabilities. You can later decide to change the shell
of a given user through the user admin interface of the CodeX Web site
and use a restricted shell like the one CodeX provide in
SF/utils/cvs1/cvssh. This is a little script that simply check the
command that are remotely executed through ssh by the user (it can be
cvs, sftp, rsync,...) and decide to accept or reject the command.<br>
<br>
To activate this pseudo shell:<br>
<ul>
  <li>copy the file cvssh in /usr/local/bin,
make sure it is executable and also add the file to the list of
authorized shells in /etc/shells. Adding cvssh to /etc/shells will make
it appear in the list of possible shells in the CodeX user admin
interface.</li>
  <li>If you want the retricted shell to be the default for all users
then
change the default value of the shell column in the user table with the
following mysql command:<br>
    <pre>$ mysql -u sourceforge sourceforge -p<br>mysql&gt;&nbsp; ALTER TABLE user ALTER COLUMN shell SET DEFAULT<br>'/usr/local/bin/cvssh' ;</pre>
  </li>
</ul>
<br>
<h2>No Shell Access</h2>
It is also possible to disable the shell access to all user by default.
The procedure is as follows:<br>
<ul>
  <li>Add '/bin/false' to the list of allowed shells in /etc/shells.</li>
  <li>If you want to deactivate shell access for all users by default
then
change the default value of the shell column in the user table with the
following mysql command:<br>
    <pre>$ mysql -u sourceforge sourceforge -p<br>mysql&gt;&nbsp; ALTER TABLE user ALTER COLUMN shell SET DEFAULT<br>'/bin/false' ;</pre>
  </li>
</ul>
Note: if you do this then you must use the pserver protocol to access
the cvs repository as the access through ssh requires a shell account
to be activated.<br>
<br>
<hr>
<h1>CodeX Site Customization</h1>
<h2>CodeX admin user</h2>
<font color="#ff0000" style="font-weight: bold;">**HIGHLY CRITICAL**</font><b><font
 color="#ff0000"><br>
</font></b>When you'll be initializing the CodeX database (see next
step below), the user table of the CodeX database is initialized with a
CodeX user called 'admin' who has full admin rights on all the CodeX
hosted projects and also has access to Web based administration modules
like user and project settings, project approval, software map
configuration,etc.<br>
<br>
The default password for the admin user is 'siteadmin' , we strongly
encourage you to change this password as soon as the site is up and
running. Here is how to do it:<br>
<ul>
  <li>login on the Web front end with user 'admin', password 'siteadmin'</li>
  <li>click on the 'Account Maintenance' &nbsp;link in the left hand
side menu pane</li>
  <li>click on change email address and update it either with your own
email address if you are the only administrator or first create a
distribution list with all the codex admin email adresses and use this
mailing list address</li>
  <li>go back and change the password&nbsp;</li>
  <li>logout and login again to make sure that the new password was
taken into account</li>
</ul>
<h2><a name="System_configuration_file_local.inc"></a>System
configuration file (local.inc)</h2>
The PHP scripts take many values from a configuration file located in <span
 style="font-family: monospace;">/etc/local.inc</span>. This file must
be initially copied from the <span style="font-family: monospace;">SF/etc/local.inc.dist</span>
file and the values must be changed accordingly for your site. Make
sure that you read this file where the role of each variable is well
documented.<br>
<h2>UI Themes</h2>
The CodeX Web pages look and feel are defined through Cascading Style
Sheets (CSS). &nbsp;Therefore CodeX UI is customizable to large extent.
The Graphical user interface elements of CodeX come in the following
directories:<br>
<br>
<ul>
  <li><tt>SF/www/css</tt> : each sub-directory in this place contains a
given theme which name is the sub-directory name. By default CodeX
comes
with the 'default' and 'savannah' style sheets. Each style directory
contains 3 CSS files named '<i>themename_fontsize</i>.css' where
fontsize is one of 'large', 'normal' or 'small'. Files differ only by
the size of the default font used in the Web pages. All 3 must be
present because CodeX users can choose a prefered font size in her
Account Maintenance page</li>
</ul>
<ul>
  <li><tt>SF/www/images</tt> : each sub-directory in this place
contains
all the logos and images needed by the CodeX Web pages. There is a
different set of images per theme and each set of images is stored in
sub-directories which name follows the pattern&nbsp;'<i>themename.</i>theme'
where themename must match the theme name defined in the cascadig style
sheet directories above.</li>
</ul>
Defining your own Look&amp;Feel is very easy:<br>
<ol>
  <li>Choose a theme name</li>
  <li>Create a directory named '<span style="font-family: monospace;">custom</span>'
both in <tt>SF/www/css and </tt><tt>SF/www/images</tt> if there isn't
one already<tt><br>
    </tt></li>
  <li>Create directory &nbsp;<tt>SF/www/css/custom/<i>themename</i>/ </tt>and
the 3 CSS files in it. Make sure the 3 file names follows the pattern '<i>themename_fontsize</i>.css'</li>
  <li>Create directory &nbsp;<tt>SF/www/images/custom/<i>themename</i>.theme/
    </tt>by
copying one of the directory that come standard with CodeX. Then
replace all the images you want to customize with your own but make
sure
to keep the exact same file names.</li>
</ol>
Finally edit the look /etc/local.inc file and set the <tt>$sys_themedefault</tt>
variable to the value of the default theme name for your site.<br>
<h2>Organization Logo</h2>
At the top of the left hand side CodeX menu pane (just above the Logged
In section) is an empty area where you can dock the logo of your
organization. This can be achieved by first creating your own theme
directory as explained in the previous section and then changing the
image named '<span style="font-family: monospace;">organization_logo.png</span>'.
By default this is a transparent image of size 52x52 pixels. We
recommend that your logo do not exceed 60x140 pixels to preserve the
nice looking layout of the menu bar.<br>
<h2><a name="Site_content"></a>Site content</h2>
Several PHP scripts in the CodeX source code contain pieces of text
that are generally here to give instructions to the CodeX users.
Typical
examples are: the introductory text at the top of the CodeX Home Page,
instructions on how to connect to the CVS repository, instructions and
guidelines in the project registration process,etc.<br>
<br>
These pieces of text are isolated from the PHP scripts themselves and
they are all placed under the top directory <tt>'site-content'</tt>.
&nbsp;The file path to the content of a given script (or part of a
script) follows the following pattern:<br>
<br>
<tt>site-content/<i>LANG_COUNTRY</i>/<i>SF_path</i>/<i>whattext</i>.txt</tt><br>
<br>
where:<br>
<ul>
  <li>LANG_COUNTRY is the standard ISO naming for language and
countries: Currently there is only en_US for CodeX is not yet localized.</li>
  <li>SF_path is the name of the directory under SF which contains the
script the text belong to.</li>
  <li>whattext.txt is a file name that contains the piece of text itself<br>
  </li>
</ul>
By default the site-content directory should be stored in the same
place as the SF directory (PHP scripts). &nbsp;Make sure you update the
<tt>$sys_inc</tt>
variable in <tt>/etc/local.inc</tt> to reflect the path to the <tt>site-content</tt>
directory (default is <tt>/home/httpd/site-content</tt>).<br>
<br>
To customize the content of a given script for your site go through the
following steps:<br>
<ol>
  <li>Under site-content create a directory called '<tt>custom</tt>'
and under this directory create the LANG_COUNTRY sub-directory (<tt>en_US</tt>only
for now).&nbsp;</li>
  <li>For each piece of text that you want to customize copy the
original <tt><i>whattext</i>.txt</tt> file under the <tt>site-content/custom/<i>LANG_COUNTRY</i>/<i>SF_path</i></tt><tt>/<i>whattext</i>.txt</tt>and
edit it as you like.<br>
    <br>
B<u>e careful that some of these files contain PHP scripting that you
probably want to preserve in your customized version. Deleting the PHP
scripting could break the entire PHP scripts. Ask the CodeX Team if you
are unsure of what you are doing.</u><br>
    <br>
  </li>
</ol>
<h2>Site Documentation</h2>
CodeX has an entry called 'Site Documentation' &nbsp;in the left hand
side menu. This menu entry actually points to the Document Manager of
the CodeX project called 'Admin Project'. &nbsp;This project is
automatically defined when the CodeX database is initialized. It comes
with group_id 1 (ONE) and you can acces it at
http://your.codex_site.url/projects/codex.<br>
<br>
All documents stored in the document manager of the 'Admin Project'
will automatically appear under 'Site Documentation' (except those
documents marked 'private' or hidden'. See the <a
 href="http://codex.xerox.com/documentation/user_guide/html/en_US/DocumentManager.html">CodeX
User Guide</a> for more details on the Document Manager service. This
is
also why you will not find the Site Documentation of the CodeX central
site in the CodeX CVS repository.<br>
<br>
<h2>User Guide and On-line Help <br>
</h2>
'On-line Help' is also a menu entry appearing in the left hand side
menu of CodeX. It actually points to the HTML version of the CodeX User
Guide (CUG). The CUG has been written in XML with the DocBook DTD and
is
stored under the top level '<tt>documentation</tt>' directory in the
CodeX CVS repository. To activate the on-line help simply check out the
<tt>documentation</tt> directory
at the same place as the <tt>SF</tt> and <tt>site-content</tt>
directories.<br>
<font color="#ff0000" style="font-weight: bold;"><br>
**IMPORTANT REMARK**</font><br>
The User Guide contain references to the company name, server name
running CodeX,etc. These pieces of information vary from one site to
another. Therefore a specific file has been introduced at <span
 style="font-family: monospace;">documentation/user_guide/xml/en_US/ParametersLocal.dtd</span>
that you can edit and where you can redefined XML entities that govern
the site specific information. For a list of the default values see the
<span style="font-family: monospace;">ParametersDefault.dtd</span> in
the same directory. If you want to redefine an entity, simply copy it
into the <span style="font-family: monospace;">ParametersLocal.dtd</span>
file and regenerate the documentation.<br>
<br>
Also notice that the HTML and PDF versions of the CUG are <b>not</b>
stored in the CVS repository. They are generated from the XML files
using the script&nbsp; <span style="font-family: monospace;">SF/utils/generate_doc.sh</span>.
You can run this
script
by hand from the sourceforge Linux account and our advice is also to
include it in the sourceforge crontab so that it runs once a day and
automatiacally regenerate the documentation when needed.<br>
<br>
For the script to work properly you must have the JRE (Java Runtime
Environment) and the DocBook processing chain installed properly. See
the section about <a href="#Specific_Software_Packages">specific
software packages to install</a>.<br>
<h2>Project Web Site</h2>
When a project is registered on CodeX a new web site is created for
that project. A default home page is installed for that project from
the <span style="font-family: monospace;">SF/utils/default_page.php</span>
file. You want to create your own custom
file for your own CodeX site. To do so:<br>
<ul>
  <li>create a directory named <span style="font-family: monospace;">custom</span>
in <span style="font-family: monospace;">SF/utils</span> if it doesn't
exist<br>
  </li>
  <li>copy the <span style="font-family: monospace;">SF/utils/default_page.php</span>
in the <span style="font-family: monospace;">SF/utils/custom</span>
directory if not already
there<br>
  </li>
  <li>edit the custom file it and customize it to your liking<br>
  </li>
</ul>
<h2>LDAP Directory</h2>
While visiting a user information page on CodeX, you have the ability
to query the LDAP directory of your company to get more information
about this user.&nbsp; The follwoing variables in the local.inc
configuration file (see <a href="#System_configuration_file_local.inc">above</a>)
allow you to customize the LDAP search:<br>
<ul>
  <li>$<span style="font-family: monospace;">sys_ldap_server</span>:
the full name of your the LDAP server to query (ask your system
administrator if you don't know of any around you)</li>
  <li><span style="font-family: monospace;">$sys_ldap_dn</span>: the
distinguished name (DN) to use in the LDAP query (Remark: the LDAP
query in CodeX uses the user email address as the search key)</li>
  <li><span style="font-family: monospace;">$sys_ldap_filter:</span>
the search filter to use when a query is sent to the LDAP server . This
is the filter argument used in the ldap_search call. Any pattern of the
form %name% in the search filter will be replaced with the
corresponding value from the user table before ldap_search is called.
As an example <span style="font-family: monospace;">%email%</span>
will be replaced by the user email, <span
 style="font-family: monospace;">%user_name%</span> means the user
login name,etc...</li>
</ul>
It is also possible to customize the HTML output of the LDAP search
when one accesses the information about a user on CodeX. You must edit
the script <span style="font-family: monospace;">site-content/<span
 style="font-style: italic;">LANG_COUNTRY</span>/include/user_home.txt</span>
to customize the HTML output and save it in the corresponding custom
directory (see <a href="#Site_content">Site Content</a> section above).<br>
<hr>
<h1>Scripts Backend</h1>
Most of the backend scripts used by the CodeX system are writen in Perl
and are located in <tt>/home/httpd/SF/utils</tt>. Many of these script
use the<tt> include.pl</tt> file and, in case you did not follow the
standard installation process explained in this document, you may have
to customize the content of this include file to match your site
configuration.<br>
<br>
<hr>
<h1>Cron jobs</h1>
CodeX runs a number of cron job in the background. The most important
one is run once every 2hours on the CodeX site to map the CodeX
user/project permission to the Linux user/group permission mechanism.
it
also create all the user and project related directories automatically.<br>
<br>
Other cron jobs runs dialy and weekly statistics.<br>
<br>
<h2>Root crontab</h2>
Find below a copy of the root crontab file. we highly recommend that
you keep the same time and frequency to run the jobs. You can however
increase the frequency of the xerox_crontab.sh job which runs normally
once every 2 hours to create new user and project directory on the
Linux
server (including the CVS repo). <br>
<br>
<blockquote><tt># run the Codex crontab script once every 2 hours</tt><br>
  <tt># this script synchronizes user, groups, cvs repo, </tt><br>
  <tt># directories, mailing lists, etc...</tt><br>
  <tt>0 0-23/2 * * * /home/httpd/SF/utils/xerox_crontab.sh </tt><br>
  <tt>#</tt><br>
  <tt># run the daily statistics script just a little bit after</tt><br>
  <tt># midnight so that it computes stats for the day before</tt><br>
  <tt># Run at 0:30 am</tt><br>
  <tt>30 0 * * * /home/httpd/SF/utils/xerox_all_daily_stats.sh</tt><br>
  <tt>#</tt><br>
  <tt># run the weekly stats for projects. Run it on Monday morning so
that</tt><br>
  <tt># it computes the stats for the week before</tt><br>
  <tt># Run on Monday at 1am</tt><br>
  <tt>0 1 * * Mon (cd /home/httpd/SF/utils/underworld-root;
./db_project_weekly_metric</tt><tt>.pl)</tt><br>
  <tt>#</tt><br>
  <tt># Delete all files in FTP incoming that are older than 2 weeks
(336 hours)</tt><br>
  <tt>#</tt><br>
  <tt>0 3 * * * /usr/sbin/tmpwatch -m -f 336 /home/ftp/incoming</tt><br>
  <tt>#</tt><br>
  <br>
</blockquote>
Please note that your own root crontab shoudl probably contain some
additional jobs like may be stopping the mysql engine before starting
your backup procedure or something similar.<br>
<h2>SourceForge crontab</h2>
<blockquote><tt># Re-generate the CodeX User Guide on a daily basis</tt><br>
  <tt>00 03 * * * /home/httpd/SF/utils/generate_doc.sh</tt><br>
  <br>
</blockquote>
<br>
<hr>
<h1>Log Files Rotation</h1>
In order to maintain statistics on http and ftp traffic the CodeX
server must be instructed to rotate the apache and ftp log files on a
daily basis.<br>
<h2>Apache Log File Rotation</h2>
<span style="font-family: monospace;">/etc/logrotate.d/apache </span>looks
like this:<br>
<br>
<span style="font-family: monospace;">/var/log/httpd/access_log {</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; missingok</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; # LJ</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; daily</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; rotate 4</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; postrotate</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/usr/bin/killall -HUP httpd 2&gt; /dev/null || true</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
# LJ Added for Codex archiving</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
year=`date +%Y`</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
month=`date +%m`</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
day=`date +%d`</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
destdir="/home/log/$year/$month"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
destfile="http_combined_$year$month$day.log"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp; mkdir -p
$destdir</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp; cp
/var/log/httpd/access_log.1 $destdir/$destfile</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; endscript</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">}</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">/var/log/httpd/vhosts-access_log {</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; missingok</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; # LJ</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; daily</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; rotate 4</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; postrotate</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/usr/bin/killall -HUP httpd 2&gt; /dev/null || true</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
# LJ Added for Codex archiving</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
year=`date +%Y`</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
month=`date +%m`</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
day=`date +%d`</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
server=`hostname`</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
destdir="/home/log/$server/$year/$month"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
destfile="vhosts-access_$year$month$day.log"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp; mkdir -p
$destdir</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp; cp
/var/log/httpd/vhosts-access_log.1 $destdir/$destfile</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; endscript</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">}</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><br style="font-family: monospace;">
<span style="font-family: monospace;">/var/log/httpd/agent_log {</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; missingok</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; # LJ</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; daily</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; rotate 4</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; postrotate</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/usr/bin/killall -HUP httpd 2&gt; /dev/null || true</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; endscript</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">}</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><br style="font-family: monospace;">
<span style="font-family: monospace;">/var/log/httpd/error_log {</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; missingok</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; # LJ</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; daily</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; rotate 4</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; postrotate</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/usr/bin/killall -HUP httpd 2&gt; /dev/null || true</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; endscript</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">}</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">/var/log/httpd/referer_log {</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; missingok</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; # LJ</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; daily</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; rotate 4</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; postrotate</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/usr/bin/killall -HUP httpd 2&gt; /dev/null || true</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; endscript</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">}</span><br>
<br>
<h2>FTP log file rotation</h2>
<span style="font-family: monospace;">/etc/logrotate.d/ftpd </span>looks
like this:<br>
<br>
/<span style="font-family: monospace;">var/log/xferlog {</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; # ftpd doesn't
handle SIGHUP properly</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; nocompress</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; # LJ Modified
for codex</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; daily</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; postrotate</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
year=`date +%Y`</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
month=`date +%m`</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
day=`date +%d`</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
destdir="/home/log/$year/$month"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
destfile="ftp_xferlog_$year$month$day.log"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp; mkdir -p
$destdir</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp; cp
/var/log/xferlog.1 $destdir/$destfile</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; endscript</span><span
 style="font-family: monospace;"></span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">}</span><br>
<br>
<br>
<hr>
<h1>Installing phpMyAdmin (optional)<br>
</h1>
phpMyAdmin is a Web based GUI to manage MySQL database. Although
installing phpMyAdmin is not mandatory it is a very convenient for a
CodeX site adminstrator. Installation is really easy:<br>
<br>
<ul>
  <li>Get phpMyAdmin from <a
 href="http://www.phpwizard.net/projects/phpMyAdmin/">http://www.phpwizard.net/projects/phpMyAdmin/</a>
. Make sure you get the version for PHP 3 if your CodeX site is running
php version 3!!</li>
  <li>Uncompressed the file in /home/httpd/. You should see a new
directory called phpMyAdmin-X.Y.Z (where X.Y.Z is the version number)</li>
  <li>In /home/httpd, create a symbolic link called phpMyAdmin to the
phpMyAdmin-X.Y.Z directory</li>
  <li>Edit config.inc.php and change the following lines to reflect
your own site configuration:<br>
    <br>
    <tt>$cfgPmaAbsoluteUri = 'http://your_codex_domain_here/phpMyAdmin';<br>
$cfgServers[$i]['host']&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= 'localhost'; // MySQL hostname<br>
$cfgServers[$i]['port']&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= '';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // MySQL
port - leave blank for <br>
default port<br>
$cfgServers[$i]['socket']&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
'';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Path to
the
socket - leave bl<br>
ank for default socket<br>
$cfgServers[$i]['connect_type']&nbsp; =
'tcp';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // How to connect to MySQL
serve<br>
r ('tcp' or 'socket')<br>
$cfgServers[$i]['controluser']&nbsp;&nbsp; =
'';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // MySQL
control user settings<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// (this user must have read-only<br>
$cfgServers[$i]['controlpass']&nbsp;&nbsp; =
'';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // access to
the "mysql/user"<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// and "mysql/db" tables)<br>
$cfgServers[$i]['auth_type']&nbsp;&nbsp;&nbsp;&nbsp; =
'http';&nbsp;&nbsp;&nbsp; // Authentication method (config, <br>
http or cookie based)?<br>
$cfgServers[$i]['user']&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= '';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // MySQL user<br>
$cfgServers[$i]['password']&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
'';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // MySQL
password (only needed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// with 'config' auth_type)<br>
$cfgServers[$i]['only_db']&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
'';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
$cfgServers[$i]['verbose']&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
'';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Verbose
name for this host -<br>
leave blank to show the hostname<br>
$cfgServers[$i]['bookmarkdb']&nbsp;&nbsp;&nbsp; =
'';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Bookmark
db
- leave blank for<br>
&nbsp;no bookmark support<br>
$cfgServers[$i]['bookmarktable'] =
'';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Bookmark
table - leave blank <br>
for no bookmark support<br>
$cfgServers[$i]['relation']&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
'';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // table to
describe the relation between links (see doc)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//&nbsp;&nbsp; - leave blank for no relation-links support</tt><br>
    <br>
  </li>
  <li>When you access the phpMyAdmin GUI at
http://your_codex_server_name_here/phpMyAdmin you'll be prompted for a
user name and password. Use the MySQL 'sourceforge' login and password.<tt><br>
    </tt></li>
</ul>
<p> </p>
<br>
<hr>
<h1>First Things To Do to run the site</h1>
<ul>
  <li>Access the CodeX server and login as admin with default password
siteadmin. Then change the password immediately. We suggest that you
use the same as the root password on the Linux side</li>
  <li>Logout and create your own account on the CodeX site: click on
'New User' and fill out the form. Wait for the email notification to
arrive and confirm the registration. If the mail doesn't work yet then
login as 'admin' again and force User registration approval in 'Main
Page' of the Site Administration menu.</li>
  <li>Login again as user 'admin' and make your own account a project
member of the Admin Project (group_id=1) so that you are considered as
a super user on the entire site. Set permissions for this new account.<br>
  </li>
  <li>You probably want to rename this 'Admin Project' to 'CodeX
Project' and use this project to create a bug tracker and a support
request tracker that will beused by user to get helpo from your CodeX
Team.</li>
  <li>Create the trackers you need (bug and support requests most
likely)</li>
  <li>From your own account create a new project 'Guinea Pig'
(shortname: gpig)&nbsp; that you will use as a test project for anybody
who wants to experiment with the site. Setup the project completely,
approve it and then set up the CVS repository with some sample code,
create a release, download it,etc...</li>
  <li>Under the 'CodeX Project' create a peice of news to announce the
launch of the CodeX site and promote the news to the front page.<br>
  </li>
</ul>
<br>
<u><font size="-2">History:</font></u>
<p><font size="-2">0.1 - Oct 18th, 2002 - Initial revision<br>
0.2 - Nov 8th, 2002 - Configuration of secure HTTP in Apache added.<br>
0.3 - Nov 12th, 2002 - Mailman configuration and installation added.<br>
0.4 - Nov 12th, 2002 - /etc/skel_codex added in the File System
structure.<br>
0.5 - Nov 14th, 2002 - Added asection about the non RMP packages to
intall (docbook and utilities), Decribe how to customize the site look
and feel, content,etc.<br>
0.6 - Nov 26th, 2002 - CVS pserver versus ssh access method. Restricted
shell account added.<br>
0.7 - Nov 28th, 2002 - Sections order modified to follow the flow of
installation and sevral corections based on XRCE feedback.<br>
</font><font size="-2"> 0.8 - Mar 25th, 2003 - Added max_allowed_packet
in my sql configuration<br>
1.1 - May 27th, 2003 - Change permission/owner for some PHP and CGI
scripts - Also import it in CVS - History now in CVS<br>
</font> <font size="-2">x.y - Now see the CVS repository of Codex for
future changes<br>
</font> <font size="-2"> </font><br>
<font size="-2"><br>
</font></p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
