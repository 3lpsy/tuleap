<?php

/**
* Copyright (c) Xerox Corporation, CodeX Team, 2001-2005. All rights reserved
* 
* $Id$
*
* Docman_View_Display
*/

require_once('Docman_View_Docman.class');

/* abstract */ class Docman_View_Display extends Docman_View_Docman {
    
    function _title($params) {
        echo '<h2>'. $this->_getTitle($params) .'</h2>';
    }
    function _breadCrumbs($params) {
        echo '<div style="float:left;">'. $GLOBALS['Language']->getText('plugin_docman', 'breadcrumbs_location') .' ';
        $item =& $params['item'];
        $current_item_title = $item->getTitle();
        $user_actions       = $item->getActions();
        $id                 = $item->getId();
        $parents = array();
        $item_factory =& $this->_getItemFactory($params);
        while ($item->getParentId() != 0) {
            $item =& $item_factory->getItemFromDb($item->getParentId());
            $parents[] = array(
                'id'    => $item->getId(),
                'title' => $item->getTitle()
            );
        }
        $parents = array_reverse($parents);
        foreach($parents as $parent) {
            echo '&nbsp;<a href="'. $params['default_url'] .'&amp;action=show&amp;id='. $parent['id'] .'">'. $parent['title'] .'</a>&nbsp;/';
        }
        echo '&nbsp;<a href="'. $params['default_url'] .'&amp;action=show&amp;id='. $id .'"><b>'. $current_item_title .'</b></a>';
        echo '<span class="docman_item_options">';
        foreach($user_actions as $key => $nop) {
            //We are showing item. We do not have to display an action to show it.
            if ($this->isActionAllowed($user_actions[$key]->action, $user_actions[$key]->item)) {
                echo $user_actions[$key]->fetch(array(
                    'docman_icons' => $this->_getDocmanIcons($params),
                    'default_url'  => $params['default_url']
                ));
            }
        }
        echo '</span>';
        echo '</div>';
    }
}

?>
