<div class="alert alert-info">
    <span class="lab_features">{{{lab}}}</span>
</div>

<p>This section allows to do {sprint} planning.</p>
<p>On the left side, you have the {release 6.0} backlog with all open elements,
not already scheduled for a {sprint}.</p>
<p>On the right side, you have the list of sprints that belongs to this {release}.</p>
<p>When you click on a {sprint}, you see it's content and you can drag'n drop
{stories} from the {sprint} backlog to a sprint or from a {sprint} back to the
backlog.</p>

{{#can_add_submilestone}}
    <p class="agiledashboard-planning-addsubmilestone">
        <a href="{{add_new_submilestone_url}}" class="btn">{{add_new_submilestone}}</a>
    </p>
{{/can_add_submilestone}}

<div class="agiledashboard-planning-backlog">
    <table class="table table-striped table-hover table-bordered">
        <thead>
            <tr>
                <th>Id</th>
                <th>{{title}}</th>
                <th>{{points}}</th>
                <th>{{parent}}</th>
            </tr>
        </thead>
        <tbody>
            {{#backlog_collection}}
                <tr data-artifact-id="{id}">
                    <td><a href="{{url}}">{{id}}</a></td>
                    <td>{{title}}</td>
                    <td>{{points}}</td>
                    <td><a href="{{parent_url}}">{{parent_title}}</a></td>
                </tr>
            {{/backlog_collection}}
        </tbody>
    </table>
</div>

<div class="agiledashboard-planning-submilestones">

    <div id="accordion">
        {{#submilestone_collection}}
        <div>
            <h4>
                <a href="{{milestone_url}}">{{milestone_title}}</a>
                {{#display_milestone_dates}}{{start_date}} - {{end_date}}{{/display_milestone_dates}} - {{status}}
            </h4>
            <div data-loaded="false" class="submilestone-data" data-submilestone-id="{{id}}" data-planning-id="{{planning_id}}">
                <p>Capacity: <span class="submilestone-capacity"></span></p>
                <table class="table table-striped table-hover table-bordered">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>{{backlog_item_title}}</th>
                            <th>{{points}}</th>
                            <th>{{parent}}</th>
                        </tr>
                    </thead>
                    <tbody class="submilestone-element-rows">
                    </tbody>
                </table>
            </div>
        </div>
        {{/submilestone_collection}}
    </div>
</div>

<div style="clear:both;"></div>

<style>
    .agiledashboard-planning-backlog {
        float: left;
    }
    .agiledashboard-planning-submilestones {
        padding-left: 1em;
        float: left;
    }
    .agiledashboard-planning-addsubmilestone {
        text-align: right;
    }
</style>
<script type="text/javascript" src="/plugins/agiledashboard/js/planning-view.js"></script>
<script type="text/javascript" src="/plugins/agiledashboard/js/milestone-planning.js"></script>
<script type="text/javascript" src="/plugins/agiledashboard/js/utils/TableRowSorter.js"></script>
